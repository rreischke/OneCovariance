; This is the configuration file for the script covariance.py which starts the covariance calculation.
; In this example config file we give a detailed description of all the different parameters that can
; be changed in the code. 
; The ini file is organised such that there are data-blocks (or sections in config parser language) denoted 
; with [data_block] and parameters below this data block with name and value: So for example
;
; [data_block]
; parameter1 = 0.5
; parameter2 = "file.txt", "file2.txt"
;
; The code itself is documented with docstrings and example codes are given in every class docstring.
;
; We use 'config.ini' as the default name for the ini.file, but this can be changed.
; If you want to run the code with this file just run:
;
; python3 covariance.py
; 
; In case you have your own ini file just do:
;
; python3 covariance.py my_ini_file.ini
;
; If you create your own ini file remember that some parameters are optional while some are necessary.
; If a necessary parameter is omitted the program will give an error message.
; If an optional parameter is omitted the program will report the assumed value.
; If parameters are set which are not required, they will just be ignored.
;
;
; Covariance-terms section:
;
; Which covariance terms are supposed to be calculated. All parameters can assume values: True/False
;   gauss:       Should the Gaussian term be calculated (this should always be True due to some necessary calculations
;                for subsequent modelling, will change in an upcoming version) 
;   split_gauss: Should the terms be split into a pure sample variance, mix term and pure shot noise term?
;                If false it speeds up the calculation. Also, if both ssc and nonGaussian are true they are considered as a single
;                nonGaussian term. The SSC term will be shown as zero in the output.
;                If true, the output option "style" should contain list or terminal (see [output settings]) otherwise the split
;                will not be saved.
;   nongaussian: Should the non-Gaussian term be calculated, note that this slows down the computation.
;   ssc:         Should the super sample covariance be calculated? Requires a healpix file for the survey variance, 
;                otherwise a circular survey footprint will be assumed. Slows down the computation slightly.
;                Usually not required for galaxy clustering only.

[covariance terms]
gauss = True
split_gauss = True
nongauss = False
ssc = False


; Observables section:
; 
; Which observables are to be calculated. In general the code supports in its current version covariance between
; cosmic shear (matter-matter), galaxy-galaxy lensing (ggl, matter-galaxy) and galaxy clustering (clustering, galaxy-galaxy).
; For the different observables there are different estimators available.
;   cosmic_shear:        Should cosmic shear be considered in the covariance?
;                        Parameters: True or False
;   est_shear:           Which estimator should be used for cosmic shear?
;                        Parameters: C_ell (angular power spectra)
;                                    xi_pm (two compment angular correlation function)
;                                    cosebi (Complete Orthogonal Sets of E/B-Integrals, equivalent to psi stats for clustering and ggl)
;                                    bandpowers (angular averaged version of C_ells, has E and B modes)
;   ggl:                 Should galaxy-galaxy lensing be considered in the covariance?
;                        Parameters: True or False
;   est_ggl:             Which estimator should be used for galaxy-galaxy lensing?
;                        Parameters: C_ell (angular power spectra)
;                                    gamma_t (tangential shear correlation function)
;                                    cosebi (Complete Orthogonal Sets of E/B-Integrals, note that this is only optimal for cosmic shear)
;                                    bandpowers (angular averaged version of C_ells, only E modes)
;   clustering:          Should galaxy clustering be considered in the covariance?
;                        Parameters: True or False
;   est_clust:           Which estimator should be used for galaxy-clustering?
;                        Parameters: C_ell (angular power spectra)
;                                    w (angular correlation function)
;                                    cosebi (Complete Orthogonal Sets of E/B-Integrals, note that this is only optimal for cosmic shear)
;                                    bandpowers (angular averaged version of C_ells, only E modes)
;   cstellar_mf:         Should the conditional stellar mass function be included (for details see csmf section)?
;                        Parameters: True or False
;   cross_terms:         Should cross-terms between the observables be considered?
;                        Parameters: True or False (Should generally be true, unless you want to consider the 
;                                    observables to be uncorrelated artificially)
;   unbiased_clustering: Should the galaxy part be treated as completely unbiased without the use of the HOD or input bias file?
;                        Paramters: True or False (default should be true, otherwise no HoD will be used)
;   combinations_clustering:     Which tomographic bin combinations should the covariance be output for clustering (first bin corresponds to 0)
;                                If this is not passed, the code will write out all unique combinations.
;                                Parameters: list of pairs (e.g. 0-0,1-1 will select the first two auto-correlation bins)
;   combinations_ggl:            Which tomographic bin combinations should the covariance be output for ggl (first bin corresponds to 0)
;                                If this is not passed, the code will write out all unique combinations.
;                                Parameters: list of pairs (e.g. 0-0,1-1 will select the first two auto-correlation bins)
;   combinations_lensing:        Which tomographic bin combinations should the covariance be output for lensing(first bin corresponds to 0)
;                                If this is not passed, the code will write out all unique combinations.
;                                Parameters: list of pairs (e.g. 0-0,1-1 will select the first two auto-correlation bins)
; Note that if any of the arguments 'combinations_clustering', 'combinations_ggl' or 'combinations_lensing' is passed, the code will generate
; a new matrix file with the suffix 'reduced', which contains the new covariance matrix with the selected bins only.
;
; It should be noted that the estimators have to be consistent, i.e. you can only get C_ell/bandpowers or cosebi in all observables.
; For the realspace observable xi_pm, gamma_t and w belong together for cosmic shear, ggl and clustering respectively.
; If you want DIFFERENT summary statistics for the tracer please check the next Arbitrary summary section!
[observables]
cosmic_shear = True
est_shear = xi_pm
ggl = False
est_ggl = C_ell
clustering = False
est_clust = C_ell
cstellar_mf = False
cross_terms = True
unbiased_clustering = False

; Arbitrary summary section:
;
; This sections should be used in two cases:
;   (i)  You do not like the summary statistics provided by the code and have your own
;   (ii) You would like to calculate the covariance between different summary statistcs which are not supported in the previous section:
;        e.g. Bandpowers and COSEBIs. This can be true on a single tracer, for example for consistency checks, or for different tracers.
; In both cases you MUST provide the Fourier space AND Real space Filter functions for all the summary statistics.
; Make sure to set the file paths in the [tabulated inputs files] section to the corresponding filter functions (otherwise everything will explode)
; WARNING: If this section is activated, the inputs in the observables section are IGNORED.
;   do_arbitrary_obs:        Should the input for arbitrary observables be used? 
;                            If 'True', the observables section is IGNORED. Leave blank or set False for standard settings.
;                            Parameters: True or False (if set)
;   oscillations_straddle:   How many osciallations should the numerical integration straddle. 
;                            Decrease this number if numerical instablities occur
;                            Parameters: Integer > 1
;   arbitrary_accuracy:      Relative accuracy of the integration over oscillations_straddle oscillations
;                            Parameters: float
[arbitrary_summary]
do_arbitrary_obs = False
oscillations_straddle = 50
arbitrary_accuracy = 1e-5

; Output section:
; 
; Specifies output directories and output files.
;   directory:                Where should the output be stored (the directory must exist)
;                             Parameters: filepath as string
;   file:                     Filename for the final covariance matrix.
;                             Parameters: filename as string, might be two filenames (see style)
;   style:                    How should the final covariance be written?
;                             Parameters: 
;                               list:   A list with all covariance matrix entries for each probe and observable.
;                                       Is splitted in Gaussian (maybe splitted as well (see split_gauss), non-Gaussian and SSC)
;                               matrix: All contributions to the covariane matrix are summed up and stored in a final matrix form.
;                                       The indexing is as follows:
;                                                  (fastest)                                        (slowest)
;                                               spatial scale (e.g. ell for C_ell) ->  tomographic bins  -> summary statistic (e.g. COSEBIs) ->  tracer(e.g. clustering)   
;                                               If only one summary statistic per tracer and probe are called, tracer and summary statistic are essentially the same
;                                               If multiple tracers are called via the arbitrary summary statistics, they appear first. Special care has to be taken for
;                                               cosmic shear since always E and B modes appear. If two summary statistics are required the two E-modes will always appear first.
;                                        This order cannot be changed at the moment. If you have your own arrangement, use the list.
;                               terminal: The list is displayed in the terminal (brace yourself)!
;   list_style_spatial_first: Should the spatial index (ell, theta, order, ...) be the fastest index or the tomographic bin index in the output LIST
;                             Note, this does not affect how the matrix format is written.
;                             Note, observable blocks will always be the slowest.
;                             Parameters: boolean
;   corrmatrix_plot:          File name of the correlation coeffcient of the final covariance matrix.
;                             Parameters: File name as string
;   save_configs:             File name for the saving the config file. This contains all parameters used in the code.
;                             Parameters: File name as string
;   save_Cells:               Should the angular power spectra be saved, usually not necessary.
;                             Parameters: True or False
;   save_trispectra:          Should the trispectra in k-space be saved? Can be used for again by specifying 'trispec_file = ... ' later on.
;                             Parameters: True or False
;   save_alms:                Should the a_lms from the mask_file be saved? Can be specified later for read in and saves a bit of computation time.
;   use_tex:                  Should LaTeX be used for the plot of the correlation coefficient?
;   save_as_binary:           Should all output be saved as a binary file (.npy)? Useful for very large covariance matrices. Can be True or False. Note that this
;                             will overwrite the file type specified for the output and ONLY write the matrix file
[output settings]
directory = ./output/
file = covariance_list.dat, covariance_matrix.mat
style = list, matrix
save_as_binary = False
list_style_spatial_first = False
corrmatrix_plot = correlation_coefficient.pdf
save_configs = save_configs.ini
save_Cells = True
save_trispectra = False
save_alms = True
use_tex = False


; covELLspace settings
;
; Settings for the covariance matrix in harmonic space (estimator 'C_ell'). Note that these settings are required for any projection to other observables.
; They will be adjusted to the required precission and values from other classes.
;   ell_min:                        Minimum multipole considered. A consistency check is carried out checking whether the minimum k in the halomodel
;                                   evaluation supports this multipole, if not it is set to the required log10k_min.
;                                   Parameters: integer
;   ell_max:                        Maximum multipole considered. A consistency check is carried out checking whether the maximum k in the halomodel
;                                   evaluation supports this multipole, if not it is set to the required log10k_max.
;                                   Parameters: integer
;   ell_bins:                       How many multipole bins should be considered over the specified range. (see also ell_type). 
;   ell_type:                       Should the ell-bins be spaced linearly or logarithmically. For logarithmic spacing they are always rounded to the next
;                                   unique integer.
;                                   Parameters: lin or log
;   ell_min_lensing:                Minimum multipole considered for lensing. A consistency check is carried out checking whether the minimum k in the halomodel
;                                   evaluation supports this multipole, if not it is set to the required log10k_min.
;                                   Parameters: integer
;   ell_max_lensing:                Maximum multipole considered for lensing. A consistency check is carried out checking whether the maximum k in the halomodel
;                                   evaluation supports this multipole, if not it is set to the required log10k_max.
;                                   Parameters: integer
;   ell_bins_lensing:               How many multipole bins should be considered over the specified range for lensing. (see also ell_type).
;                                   Parameters: integer
;   ell_type_lensing:               Should the ell-bins be spaced linearly or logarithmically. For logarithmic spacing they are always rounded to the next
;                                   unique integer.
;                                   Parameters: lin or log
;   ell_min_clustering:             Minimum multipole considered for clustering. A consistency check is carried out checking whether the minimum k in the halomodel
;                                   evaluation supports this multipole, if not it is set to the required log10k_min.
;                                   Parameters: integer
;   ell_max_clustering:             Maximum multipole considered for clustering. A consistency check is carried out checking whether the maximum k in the halomodel
;                                   evaluation supports this multipole, if not it is set to the required log10k_max.
;                                   Parameters: integer
;   ell_bins_clustering:            How many multipole bins should be considered over the specified range for clustering. (see also ell_type).
;                                   Parameters: integer
;   ell_type_clustering:            Should the ell-bins be spaced linearly or logarithmically. For logarithmic spacing they are always rounded to the next
;                                   unique integer.
;                                   Parameters: lin or log
;   delta_z:                        Width of redshift steps used to create the interpolation splines for powerspectrum and response calculations. Usually below 0.1 is accurate enough,
;                                   unless rapid changes in the growth are expected. (Decrease will slow down the code slightly)
;                                   Parameters: float
;   tri_delta_z:                    Width of redshift steps used to create the interpolation splines for trispectrum calculations. Usually below something around 0.5 is accurate enough,
;                                   unless rapid changes in the growth are expected. (Decrease will slow down the code quite a bit)
;                                   Parameters: float
;   integration_steos:              Number of steps for the trapeziodal rule for the integration along the line-of-sight (in log-spaced co-moving distance). Increasing this will slow down the code
;                                   500 was accurate enough for all cases tested.
;                                   Parameters: integer             
;   nz_interpolation_polynom_order: Interpolation order for the read in redshift distribution. If the distribution is sampled enough in the input file
;                                   this should not make a big difference.
;                                   Parameters: integer
;   mult_shear_bias:                Multiplicative shear bias uncertainty (sigma_m) in each tomographic bin.
;                                   Parameters: floats separated by commas (the number of entries must match the number of tomographic bins considered via the 
;                                               redshift distribution files for lensing, see 'zlens_file'), otherwise it is ignored.
;   limber:                         Should the limber calcualtion be used for the angular power spectrum calculations?
;                                   Parameters: True or False
;   pixelised_cell:                 Should the angular statistics be convolved with a pixes window. This will reduce power on small scales.
;                                   Parameters: True or False
;   pixel_Nside:                    Nside (ofthe healpix map) of the above pixelization.
;                                   Parameters: Integer (typicall a power of 2)
;   n_spec:                         It is possible two define different ell-ranges for different probes (for example when considering spectroscopic and photometric galaxy clustering).
;                                   n_spec considers the first n_spec tomographic bins of the clustering probe as spectroscopic and associates them with ell_spec, while the remaining
;                                   are associated with ell_photo (see parameters below). If not specified or set to zero only the ell will be used as the multipole range. This is usually
;                                   needed for a 6x2pt analysis.
;                                   Parameters: integer
;   ell_spec/photo_min:             Minimum multipole considered for spectroscopic and photometric sample (see n_spec).
;                                   Parameters: integer
;   ell_spec/photo_max:             Maximum multipole considered for spectroscopic and photometric sample (see n_spec).
;                                   Parameters: integer
;   ell_spec/photo_bins:            How many multipole bins should be considered for spectroscopic and photometric sample (see n_spec).
;                                   Parameters: integer
;   ell_spec/photo_type:            Should the ell-bins for the spectroscopic and photometric sample (see n_spec) be spaced linearly or logarithmically. For logarithmic spacing they are always rounded to the next
;                                   unique integer.       
[covELLspace settings]
ell_min = 2
ell_max = 10000
ell_bins = 100
ell_type = log
ell_min_lensing = 10
ell_max_lensing = 5000
ell_bins_lensing = 15
ell_type_lensing = log
ell_min_clustering = 10
ell_max_clustering = 1000
ell_bins_clustering = 20
ell_type_clustering = log
delta_z = 0.08
tri_delta_z = 0.25
integration_steps = 1000
nz_interpolation_polynom_order = 1
mult_shear_bias = 0.0192, 0.007671, 0.00711, 0.005669, 0.006
limber = True
pixelised_cell = False
pixel_Nside = 2048
n_spec = 0
#ell_spec_min = 2
#ell_spec_max = 514
#ell_spec_bins = 64
#ell_spec_type = lin
#ell_photo_min = 51
#ell_photo_max = 2952
#ell_photo_bins = 12
#ell_photo_type = log




; covThetaspace section:
;
; Specifies the settings for the realspace correlation functions (i.e. for the estimators w, gamma_t and xi_pm). All terms are calculated
; directly from the C_ell covariance. Note that the shear field has to statistics (xi_p and xi_m) as it is a spin-1 field.
;   theta_min:             Minimum angle considered. The minimum multipole in the ell-space settings will be overwritten to support the Hankel transformation.
;                          Parameters: float (in arcminutes)
;   theta_max:             Maximum angle considered. The maximum multipole in the ell-space settings will be overwritten to support the Hankel transformation.
;                          Parameters: float (in arcminutes)
;   theta_bins:            How many angular bins should be considered over the specified range. (see also theta_type).
;                          Parameters: integer
;   theta_type:            Should the theta-bins be spaced linearly or logarithmically or should a list be used (ignores the previous three parameters)
;                          Parameters: lin/log or list
;   theta_list:            List of theta bin boundaries(all bin boundaries in arcminues, note that the bins are always neighbouring once, i.e. a list with
;                          n entries will always create n-1 theta bins)
;                          Parmaeters: floats separated by comma (the example will create two bins [1,2] and [2,3])
;   xi_pp:                 Should the xi_p covariance be considered?
;                          Parameters: True or False
;   xi_mm                  Should the xi_m covariance be considered?
;                          Parameters: True or False
;   theta_accuracy:        Relative accuracy for the integration over ell to map to theta, might want to increase for unstable covariance.
;                          Parameter: float
;   integration_intervals: Number of oscillations covered for each sub integrand, decrease for more accuracy
;                          Parameter: integer
; There is a possibility to call an external module to obtain a better estimate of the mixed term. This requires a few arguments to be passed
; and will potentially slow down the computation by a few hours.
;   mix_term_do_mix_for:              LEAVE EMPTY (mix_term_do_mix_for = ), when the standard mix term should be considered.
;                                     For which estimators should the mixed term be calculated via triplet counts. Can be 'xipxip'
;                                     Parameters: 'xipxip, 'xipxim', 'ximxim'
;   mix_term_file_path_catalog:       Path to the cataloge for the triplet counts.
;                                     Parameters: filename as string
;   mix_term_col_name_weight:         Column name of the weight column in the catalogue
;                                     Parameters: name as string
;   mix_term_col_name_pos1:           Column name of the position 1 column in the catalogue
;                                     Parameters: name as string
;   mix_term_col_name_pos2:           Column name of the position 2 column in the catalogue
;                                     Parameters: name as string
;   mix_term_col_name_zbin:           Column name of the 'zbin' clomun in the catalogue
;                                     Parameters: name as string
;   mix_term_isspherical:             Are poistions given in ra/dec (True) or flat-sky x/y (False)
;                                     Parameters: True or False
;   mix_term_target_patchsize:        Target sidelength (in degree) of patches constructed from fullsky catalogue
;                                     Parameters: Float
;   mix_term_do_overlap:              Should individual patches overlap?
;                                     Parameters: True or False
;   mix_term_nbins_phi:               How many theta bins to use for the integral over the correlation function?
;                                     Parameters: integer
;   mix_term_nmax:                    Largest multipole up until which the triplets are computed
;                                     Parammeters: integer
;   mix_term_dpix_min:                Smallest pixelization scale used in the multipole computation
;                                     Parameters: float
;   mix_term_do_ec:                   Should we do edge corrections. Takes some time and has little effect, but is formally correct thing to do after bare triplet calculation.
;                                     Parameters: True or False
;   mix_term_subsample:               Factor by which the discrete catalog is being subsampled.
;                                     Parameters: integer
;   mix_term_nsubr:                   How many subdivision we use for the tripletcounts as compared to a single bin in the xipxim
;                                     Parameters: integer
;   mix_term_file_path_save_triplets: Where should the triplet counts be stored.
;                                     Parameters: filename as string (path must exist)
;   mix_term_file_path_load_triplets: Path from which to load precomputed triplets (see mix_term_file_path_save_triplets). If given, all other parameters above do not need to be set.
;                                     Parameters: filename as string (path must exist)


[covTHETAspace settings]
theta_min = 0.5
theta_max = 300.0
theta_bins = 9
theta_type = log


theta_list = 1, 2, 3
xi_pp = True
xi_mm = True
theta_accuracy = 1e-3
integration_intervals = 400

mix_term_do_mix_for = 
mix_term_file_path_catalog = ./input/catalogue_mixed/tmpcygnus.fits
mix_term_col_name_weight = weight
mix_term_col_name_pos1 = ALPHA_J2000 
mix_term_col_name_pos2 = DELTA_J2000
mix_term_col_name_zbin = zbin
mix_term_isspherical = True
mix_term_target_patchsize = 10
mix_term_do_overlap = True
mix_term_nbins_phi = 100
mix_term_nmax = 10
mix_term_do_ec = False
mix_term_subsample = 1
mix_term_nsubr = 5
mix_term_file_path_save_triplets = ./input/catalogue_mixed/tripletcounts_cyg_nsubr5_subsample10.fits
mix_term_file_path_load_triplets =  ./input/catalogue_mixed/tmptripletcounts_test.fits


; Condistional stellar mass function setting
;
; Specifies the settings for the conditional stellar mass function settings.
;   csmf_log10Mmin:    Minimum log10 stellar mass (in logM_soloar /h) for the binning
;                      Parameters: float
;   csmf_log10Mmax:    Maximum log10 stellar mass (in logM_soloar /h) for the binning
;                      Parameters: float
;   csmf_N_log10M_bin: Number of logarithmically spaced bins in log10 stellar mass:
;                      Parameters: integer
;   csmf_log10M_bins:  Diretly specifying the stellar mass bin boundaries (in logM_soloar /h) with an arbitrary spacing. If this is provided,
;                      the rest of the section is ignored. For N bins, N+1 values must be provided.
;                      Parameters: list of floats  
;   csmf_directory:    Where to find the files for the csmf calculations, e.g. the Vmax and tomographic fractions file.
;                                in section output settings)
;                                Parameters: path to directory as string
;   V_max_file:        File name for Vmax which is required for the estimator of the csmf. It should have the following shape
;                                log10 M_star_1   Vmax_redshift_1
;                                      ...          ...
;                                log10 M_star_n   Vmax_redshift_1
;                                      ...          ...
;                                log10 M_star_1   Vmax_redshift_m
;                                      ...          ...
;                                log10 M_star_n   Vmax_redshift_m
;
;                      Note that n has to match the number of csmf stellar mass bins, csmf_N_log10M_bin, and m has to match the number of redshift bins
;                      as provided in the redshift section.
;   f_tomo_file:       File name for the fraction of galaxies in each tomographic bin. This much match the size of the number of tomographic bin for 
;                      the csmf as specified in the redshift section.
;                                 f_tomo_1
;                                    ...
;                                 f_tomo_n   
;   csmf_diagonal:     If True, considers only the i-th tomographic bin with the i-th stellar mass bin (default = False) 
;                      Parameters: True or False       
[csmf settings]
csmf_log10Mmin = 9.1
csmf_log10Mmax = 11.3
csmf_N_log10M_bin = 10
csmf_directory = ./input/conditional_smf/
;csmf_log10M_bins = 
V_max_file = V_max.asc
f_tomo_file = f_tomo.asc
csmf_diagonal = False


; covCOSEBI section
;
; Specifies the settings for the COSEBIs covariance. The COSEBIs are directly calculated from the C_ell covariance apart from the shot noise
; term which is directly calculated from realspace. 
; Note that the COSEBIs are only optimal for cosmic shear. For GC and GGL the COSEBI flag will correspond to Psi-stats.
;   En_modes:             How many COSEBI modes should be calculated, can also passed En_modes_clustering or En_modes_lensing
;                         Parameters: integer
;   theta_min:            Minimum theta of the range of COSEBIs, can also passed theta_min_clustering or theta_min_lensing
;                         Parameters: float (angle in arcminutes)
;   theta_max:            Maximum theta of the range of COSEBIs, can also passed theta_max_clustering or theta_max_lensing
;                         Parameters: float (angle in arcminutes)
;   En_accuracy:          Required accuracy for the integration of COSEBis
;                         Parameters: float
;   dimensionless_cosebi: Whether the standard COSEBIs or the dimensionless COSEBIs are calculated. If True the dimensionless COSEBIs are computed, default is False.
;                         Parameter: boolean (True/False)
[covCOSEBI settings]
En_modes = 5
theta_min = 4.0
theta_max = 300
En_accuracy = 1e-4
dimensionless_cosebi = False


; Bandpowers section
;
; Specifies the settings for the bandpower calculation. The bandpower is calculated from the covariance in realspace via simple error propagation.
; The bandpowers are implemented for all tracers.
;   apodisation_log_width_clustering: log width of the apodisation (to surpress angular scales outside of the survey size)
;                                     Parameters: float
;   theta_lo_clustering:              Centre value for the lower limit of the angular range for clustering.
;                                     Parameters: float (in arcminutes)
;   theta_up_clustering:              Centre value for the upper limit of the angular range for clustering.
;                                     Parameters: float (in arcminutes)
;   ell_min_clustering:               Lower limit of the lowest multipole (bandpower) band for clustering.
;                                     Parameters: integer
;   ell_max_clustering:               Upper limit of the highest multipole (bandpower) band for clustering.
;                                     Parameters: integer
;   ell_bins_clustering:              Number of bands calculated between ell_min and ell_max for clustering.
;                                     Parameters: integer
;   ell_type_clustering:              Should the ell bins for clustering be linearly or logarithmically spaced?
;                                     Parameters: lin/log
;   apodisation_log_width_lensing: log width of the apodisation (to surpress angular scales outside of the survey size)
;                                     Parameters: float
;   theta_lo_lensing:              Centre value for the lower limit of the angular range for lensing.
;                                     Parameters: float (in arcminutes)
;   theta_up_lensing:              Centre value for the upper limit of the angular range for lensing.
;                                     Parameters: float (in arcminutes)
;   ell_min_lensing:               Lower limit of the lowest multipole (bandpower) band for lensing.
;                                     Parameters: integer
;   ell_max_lensing:               Upper limit of the highest multipole (bandpower) band for lensing.
;                                     Parameters: integer
;   ell_bins_lensing:              Number of bands calculated between ell_min and ell_max for lensing.
;                                     Parameters: integer
;   ell_type_lensing:              Should the ell bins for lensing be linearly or logarithmically spaced?
;                                     Parameters: lin/log
;   bandpower_accuracy:               Relative accuracy of the bandpower estimator
;                                     Parameters: float
;   theta_binning:                    Number of theta bins used for the error propagation, for KiDS1000 300 were used to avoid any discretization effects
;                                     Parameters: integer
[covbandpowers settings]
apodisation_log_width_clustering = 0.5

apodisation_log_width = 0.5
theta_lo = 0.5
theta_up = 300
ell_min = 100
ell_max = 1500
ell_bins = 8
ell_type = log

theta_binning = 300
bandpower_accuracy = 1e-7


; Survey specs section
; Sets the specifications for the survey such as survey mask, survey area, number density etc.
;   mask_directory:              Where to find the survey masks and eventually a_lm files (if saved, see save_alm parameter 
;                                in section output settings)
;                                Parameters: path to directory as string
;   mask_file_clust:             filename (within mask_directory) for the mask file of the galaxy clustering measurements.
;                                Parameters: filename (fits) as string
;   alm_file_clust:              filename (within mask_directory) for the sum over m of the a_lm modes derived from the associated maskfile above. 
;                                If specified, the mask file is not used
;                                Note that the code will NOT look for the maskfile if the alm file is not found but use a spherical mask instead.
;                                Parameters: filename (plain ascii) as string.
;   survey_area_clust_in_deg2:   Survey area for the galaxy clustering measurement. (First entry is spectroscopic, second entry is photometric).
;                                If not given it is inferred from the maskfile.
;                                If given, the maskfile value for the area is overwritten.
;                                Parameters: survey area as float (in square degrees)
;   n_eff_clust:                 Effective number density for the galaxy clustering measurement in each tomographic bin and mass bin
;                                Parameters: list of floats separated by commas for the number densities in (arc minutes)^(-2). The
;                                            length of the list should agree with the number of tomographic bins provided by the 
;                                            zclust_file in the redshift section. If multiple stellar mass bins are provided, this quantity is
;                                            calculated from the HoD directly.                       
;   mask_file_ggl:               filename (within mask_directory) for the mask file of the galaxy-galaxy lensing measurements.
;                                Parameters: filename (fits) as string
;   alm_file_ggl:                filename (within mask_directory) for the sum over m of the a_lm modes derived from the associated maskfile above.
;                                If specified, the mask file is not used
;                                Note that the code will NOT look for the maskfile if the alm file is not found but use a spherical mask instead.
;                                Parameters: filename (plain ascii) as string.
;   survey_area_ggl_in_deg2:     Survey area for the galaxy-galaxy lensing measurement. If not given it is inferred from the maskfile.
;                                If given, the maskfile value for the area is overwritten.
;                                Parameters: survey area as float (in square degrees)
;   mask_file_lensing:           filename (within mask_directory) for the mask file of the cosmic shear measurements.
;                                Parameters: filename (fits) as string
;   alm_file_lensing:            filename (within mask_directory) for the sum over m of the a_lm modes derived from the associated maskfile above.
;                                If specified, the mask file is not used. 
;                                Note that the code will NOT look for the maskfile if the alm file is not found but use a spherical mask instead.                       
;                                Parameters: filename (plain ascii) as string.
;   survey_area_lensing_in_deg2: Survey area for the cosmic shear measurement. If not given it is inferred from the maskfile.
;                                If given, the maskfile value for the area is overwritten.
;                                Parameters: survey area as float (in square degrees)
;   n_eff_lensing:               Effective number density for the cosmic shear measurement in each tomographic bin.
;                                Parameters: list of floats separated by commas for the number densities in (arc minutes)^(-2). The
;                                            length of the list should agree with the number of tomographic bins provided by the 
;                                            zlens_file in the redshift section.
;   ellipticity_dispersion:      Ellipticity dispersion of the single ellipticity component (the total dispersion is this times sqrt(2)) for each
;                                tomographic bin.
;                                Parameters: list of floats separated by commas for the ellipticity dispersion sigma_eps. The
;                                            length of the list should agree with the number of tomographic bins provided by the 
;                                            zlens_file in the redshift section.
; There is also the potential to specify other alm_files, but they are not needed for standard calculations
; 
[survey specs]
mask_directory = ./input/mask
mask_file_clust = mask_BOSS_2dFLenS_wcs_nside4096.fits
alm_file_clust = alms_clust.ascii
survey_area_clust_in_deg2 = 1100
n_eff_clust = 0.16
; mask_file_ggl = ....fits
; alm_file_ggl = alms_ggl.ascii
survey_area_ggl_in_deg2 = 1100
;mask_file_lensing = KiDS_Legacy_NS_healpix_4096_frac.fits
;alm_file_lensing = alms_lens.ascii
survey_area_lensing_in_deg2 = 777
ellipticity_dispersion = 0
n_eff_lensing = 0.605481425815


; Redshift section
;
; Specifies the redshift distribution for sources and lenses. They do not need to be normalized, the code takes care of this internally.
; Note that the amount of files or columns passed here sets the number of tomographic bins for lenses and clustering which will be used later in the code.
; Other settings, such as the effective number desnity, ellipticity dispersion and pair count files must match this number if the corresponding
; tracer is required in the covariance calculation.
;   z_directory:           Where to find the redshift distribution files. 
;                          Parameters: path to directory as string
;   zclust_directory:      Same as z_directory but for clustering only, if you prefer them separated. But should you really separate lenses and sources?
;   zlens_directory:       Same as z_directory but for lensing only, if you prefer them separated. But should you really separate lenses and sources?
;   zclust_file:           Filenames of the redshift distribution files of the lenses for N_lens bins
;                          Parameters: Either a single file with the style (files can be ascii or fits)
;                                        redshift   n_1(z) ... n_{N_lens}(z)
;                                           ...      ...           ...
;                                      Or N_lens files i separated by comma with the style
;                                        redshift   n_i(z)
;                                           ...      ...
;                                      Note that they all have to have the same number of z and n(z) values.
;   value_loc_in_clustbin: Where in each z_bin (this is the bin in the histogram of n(z), not the tomographic bin) should the value of n(z) be associated to?
;                          Parameters: Either mid, left or right
;   zclust_file:           Filenames of the redshift distribution files of the sources for N_source bins
;                          Parameters: Either a single file with the style (files can be ascii or fits)
;                                        redshift   n_1(z) ... n_{N_source}(z)
;                                           ...      ...           ...
;                                      Or N_source files i separated by comma with the style
;                                        redshift   n_i(z)
;                                           ...      ...
;                                      Note that they all have to have the same number of z and n(z) values.
;   value_loc_in_lensbin:  Where in each z_bin (this is the bin in the histogram of n(z), not the tomographic bin) should the value of n(z) be associated to?
;                          Parameters: Either mid, left or right
;   zlens_extension:       Extension for fits files
;                          Parameters: string of extension (e.g. NZ_SOURCE)
;   zcsmf_file:            Filenames of the redshift distribution files of the conditional stellar mass function (see csmf section)
;                          Parameters: Either a single file with the style (files can be ascii or fits)
;                                        redshift   n_1(z) ... n_{N_source}(z)
;                                           ...      ...           ...
;                                      Or N_source files i separated by comma with the style
;                                        redshift   n_i(z)
;                                           ...      ...
;                                      Note that they all have to have the same number of z and n(z) values.
[redshift]
zlens_directory = ./input/redshift_distribution/
zlens_file = K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO1_Nz.ascii
zclust_directory = ./input/redshift_distribution/
zclust_file = K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO1_Nz.ascii

;, K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO2_Nz.ascii, K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO3_Nz.ascii, K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO4_Nz.ascii, K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO5_Nz.ascii, K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO6_Nz.ascii
value_loc_in_lensbin = mid

; arbitrary radial weights section
;
; If needed, the user can specify arbitrary weight functions for the radial part of the line-of-sight integration.
; In this way, one can replace the lensing weight function and the number count weight function with an arbitrary weight function of a different probe.
; The meaning of "sources" (m) and "lenses" (g) of course is just a place holder, as this weight can correspond to anything you give as an input.
; However, we keep this notation throughout as these are the names which they will be stored in. In other words, the weights_m covariance will be stored as 'mmmm'.
;   has_arbitrary_weights_m:     Do you want to pass arbitrary weights for 'sources' or not.   
;                                Parameters: False or True
;   has_arbitrary_weights_g:     Do you want to pass arbitrary weights for 'lenses' or not.   
;                                Parameters: False or True
;   arbitrary_weights_directory: Where to find the arbitrary radial weight files. 
;                                Parameters: path to directory as string                                            
;   arbitrary_weights_file_m:    Filenames of the arbitrary radial weight files of the "sources" for N_source bins.
;                                Parameters: Either a single file with the style (files can be ascii or fits)
;                                               radial comoving distances [Mpc/h]   W_1(chi) ... W_{N_source}(chi)
;                                                           ...                      ...           ...
;                                            Or N_source files i separated by comma with the style
;                                               radial comoving distances [Mpc/h]   W_i(chi)
;                                                           ...                       ...
;                                            Note that they all have to have the same number of chi and W(chi) values.
;                                            Lastly, note that W also needs all units it carries in units of h.
;   arbitrary_weights_file_g:    Filenames of the arbitrary radial weight files of the "lenses" for N_lens bins.
;                                Parameters: Either a single file with the style (files can be ascii or fits)
;                                               radial comoving distances [Mpc/h]   W_1(chi) ... W_{N_lens}(chi)
;                                                           ...                      ...           ...
;                                            Or N_lens files i separated by comma with the style
;                                               radial comoving distances [Mpc/h]   W_i(chi)
;                                                           ...                       ...
;                                            Note that they all have to have the same number of chi and W(chi) values.
;                                            Lastly, note that W also needs all units it carries in units of h.
[arbitrary radial weights]
has_arbitrary_weights_m = False
has_arbitrary_weights_g = False
arbitrary_weights_directory = ./input/arbitrary_radial_kernel/
arbitrary_weights_file_m = 
arbitrary_weights_file_g = 

; Cosmology section:
; Sets all relevant cosmological parameters. The background cosmology is calculated with astropy, while the halo massfunctiion
; is calcualted with hmf.
;   sigma8:   Standard deviation of the linear matter field filtered on a scale of 8 Mpc/h
;             Parameters: float
;   h:        Dimensionless Hubble constant, H0 = 100 h km/s/Mpc
;   omega_m:  Total matter density parameter today (this is the capital Omega, NOT omega = Omega h^2). The CDM parameter is inferred as
;             omega_m-omega_b
;             Parameters: float
;   omega_b:  Baryon matter density parameter today (this is the capital Omega, NOT omega = Omega h^2)
;             Parameters: float
;   omega_de: Dark energy matter density parameter today (this is the capital Omega, NOT omega = Omega h^2)
;             Parameters: float
;   w0:       Constant equation of state parameter for the Dark Energy component, beware of the phantom crossing w < -1
;             Parameters: float
;   wa:       Linear variation (with a) of the Dark Energy equation of state.
;             Parameters: float
;   ns:       Spectral index of the primordial power spectrum
;             Parameters: float
;   neff:     Effective number of relativistic degrees of freedom
;             Parameters: float
;   m_nu:     Sum of the neutrino masses (multiple masses will be included in future releases)
;             Parameters: float
;   tcmb0:    CMB temperature today.
;             Parameters: float
[cosmo]
sigma8 = 0.8
h = 0.7
omega_m = 0.3
omega_b = 0.05
omega_de = 0.7
w0 = -1.0
wa = 0.0
ns = 0.965
neff = 3.046
m_nu = 0.0
tcmb0 = 2.725


; Bias section
;
; Specifying the settings for the bias prescription. This complemented by the HOD section since we use a bias prescription
; dependent on halo mass and a fitting function for b(M,z) for DM halos which are then populated with galaxies.
;   model:                halo bias model b(M,z)
;                         Parameters: Tinker10 (at the moment this is the only one implemented, but feel free to implement your own in the
;                                    bias class
;   mc_relation_cen:      mass concentration relation for centrals
;                         Parameters: duffy08, uses the Duffy 2008 mean mass concentration relation.
;   mc_relation_sat:      mass concentration relation for satellites
;                         Parameters: duffy08, uses the Duffy 2008 mean mass concentration relation.
;   norm_mc_relation_cen: normalisation of concentration mass relation for centrals
;                         Parameters: float
;   norm_mc_relation_sat: normalisation of concentration mass relation for satellites
;                         Parameters: float
;   log10mass_bins:       log10 of the stellar mass bins in M_sun/h
;                         Parameters: list of mass bin boundaries separated by commas, N bins require N+1 boundaries. If not passed no mass
;                                     selection is assumed.
;   bias_files:           You can pass a redshift dependent but scale independent bias. This OVERWRITES the HoD prescription and uses the matter
;                         power spectrum times this bias factor squared.
;                         File paths of bias as a function of redshift. The number of biases must match the number of clustering bins
;                         Parameters: Either a single file with the style (files can be ascii or fits)
;                                        redshift   b_1(z) ... b_{N_lens}(z)
;                                           ...      ...           ...
;                                        Or N_lens files i separated by comma with the style
;                                            redshift   b_i(z)
;                                               ...      ...
;                                        Note that they all have to have the same number of z and b(z) values.
[bias]
model = Tinker10
bias_2h = 1.0
mc_relation_cen = duffy08
mc_relation_sat = duffy08
norm_mc_relation_cen = 0.929
norm_mc_relation_sat = 0.6289028827810339
log10mass_bins = 9.1, 11.3
;log10mass_bins = 9.1, 11.3
;bias_files = ./input/bias/zet_dependent_bias.ascii


; 9.95, 10.25, 10.5, 10.7,11.3


; Intrinsic Alignment section
;
; We assume a very simple linear coupling between intrinsic ellipticity and the tidal field but inform it with the fully evolved tidal field.
; It just resembles the commonly used NLA model with redshift varying amplitude. Note that the contributions are carried into the SSC and trispectrum
; as well
;   A_IA:       Amplitude of the intrinsic alignment signal.
;               Parameters: float
;   eta_IA:     Slope of the redshift evolution of the alignment amplitude
;               Parameters: float
;   z_pivot_IA: Pivot scale in redshift for the redshift evolution.
;               Parameters: float
[IA]
A_IA = 0.
eta_IA = 0.0
z_pivot_IA = 0.3


; Halo Occupation Distribution section setting the occupation numbers for centrals and satellites. This section goes hand in hand with the
; bias section which prescripes the halo bias as a function of halo mass which are in turn populated with galaxies by means of this section.
;   model_mor_cen:      Model for the central galaxies (as implemented in the HOD class, here modified Schechter)
;                       Parameters: double_powerlaw
;   model_mor_sat:      Model for the satellite galaxies (as implemented in the HOD class, here modified Schechter)
;                       Parameters: double_powerlaw
;   dpow_logm0_cen:     Pivot mass for the first power law of centrals 
;                       Parameters: float in log10 M_sun/h
;   dpow_a_cen:         Exponent of first power law of centrals
;                       Parameters: float
;   dpow_b_cen:         Exponent of the first power law of centrals
;                       Parameters: float
;   dpow_norm_cen:      Normalization of centrals
;                       Parameters: float
;   dpow_norm_sat:      Normalization of satellites
;                       Parameters: float
;   model_scatter_cen:  Transistion for central galaxies
;                       Parameters: lognormal
;   model_scatter_sat:  Transistion for satellite galaxies
;                       Parameters:modschechter (modified schechter function)
;   logn_sigma_c_cen:   Width of the transistion region for centrals
;                       Parameters: float (\sim log10M)
;   modsch_logmref_sat: Reference mass for satellites galaxies
;                       Parameters: float in log10 M_sun/h
;   modsch_alpha_s_sat: Powerlaw slope for satellites
;                       Parameters: float
[hod]
model_mor_cen = double_powerlaw
model_mor_sat = double_powerlaw
dpow_logm0_cen = 10.51
dpow_logm1_cen = 11.38
dpow_a_cen = 7.096
dpow_b_cen = 0.2
dpow_norm_cen = 1.0
dpow_norm_sat = 0.56
model_scatter_cen = lognormal
model_scatter_sat = modschechter
logn_sigma_c_cen = 0.35
modsch_logmref_sat = 13.0
modsch_alpha_s_sat = -0.858
modsch_b_sat = -0.024, 1.149


; Halo model section
; 
; All halo model ingredients such as the mass function are calculated with the HMF module. In this section we set the
; necessary parameters for the module. See also the documentation of HMF (https://hmf.readthedocs.io/en/latest/).
;   m_bins:                  Number of mass bins over which the halo mass function should be evaluated.
;                            Parameters: integer
;   log10m_min:              Minimum mass considered for halo model integrals. Note that this is the absolute minimum mass,
;                            but halo mass bins set earlier can chop these up.
;                            Parameters: float, log10(M_sun/h)
;   log10m_max:              Maximum mass considered for halo model integrals. Note that this is the absolute maximum mass,
;                            but halo mass bins set earlier can chop these up.
;                            Parameters: float, log10(M_sun/h)
;   hmf_model:               Which halo mass function should be used.
;                            Parameters: string
;   mdef_model:              What is the mass definition used.
;                            Parameters: string
;   mdef_params:             Parameters:of aforementioned mass definition.
;                            Parameters: string and floats separated by commas
;   disable_mass_conversion: If the built in mass definition does not agree with the provided one, should they be converted?
;                            Parameters: False or True
;   delta_c:                 Linearly evolved critical collapse density
;                            Parameters: float
;   small_k_damping_for1h:   Should the one halo term be damped at large scales (to avoid shot noise contribution there)
;                            Parameters: True or False
[halomodel evaluation]
m_bins = 900
log10m_min = 6
log10m_max = 18
hmf_model = Tinker10
mdef_model = SOMean
mdef_params = overdensity, 200
disable_mass_conversion = True
delta_c = 1.686
transfer_model = CAMB
small_k_damping_for1h = damped


; Powerspectrum Section
;
; Sets parameter for the evaulation of the power spectrum. These might be adjusted internally by the code if the required scales
; neccessitate a change to avoid extrapolation
;   non_linear_model:  Model for the nonlinear matter power spectrum
;                      Parameters: original, bird, peacock, takahashi, halomodel, mead2015, mead2016, mead2020, mead2020_feedback 
;   log10k_bins:       How many k-steps should be created for the spline at each redshift
;                      Parameters: integer
;   log10k_min:        log10 of the minimum k value (in h/Mpc)
;                      Parameters: float
;   log10k_max:        log10 of the maximum k value (in h/Mpc)
;                      Parameters: float
;   HMCode_A_baryon:   HMcode parameter A_baryon. Default 3.13. Used only in models mead2015 and mead2016 (see CAMB)
;                      Parameters: float
;   HMCode_eta_baryon: HMcode parameter eta_baryon. Default 0.603. Used only in mead2015 and mead2016 (see CAMB)
;                      Parameters: float
;   HMCode_logT_AGN:   HMcode parameter logT_AGN. Default 7.8. Used only in model mead2020_feedback.
;                      Parameters: float
[powspec evaluation]
non_linear_model = takahashi
HMCode_logT_AGN = 7.3
log10k_bins = 300
log10k_min = -3.49
log10k_max = 3.15


; Trispectrum Section
;
; Sets parameter for the evaulation of the trispectrum for the nongaussian covariance. This is where the trispectrum is actually calculated.
; Afterwards it is smeared on the values set in the powspec evaluation section.
;   log10k_bins:             How many k-steps should be created for the spline at each redshift
;                            Parameters: integer
;   log10k_min:              log10 of the minimum k value (in h/Mpc)
;                            Parameters: float
;   matter_klim:             Minimum k for k-integrals
;                            Parameters: float (in h/Mpc)
;   matter_mulim:            Minimum cos(angle) for angular integrals over paralellogram configurations.
;                            Parameters: float
;   log10k_max:              log10 of the maximum k value (in h/Mpc)
;                            Parameters: float
;   small_k_damping_for1h:   Should the one halo term be damped at large scales (to avoid shot noise contribution there)
;                            Parameters: True or False
;   lower_calc_limit:        If trispectrum drops below this value, ignore it
;                            Parameters: float

[trispec evaluation]
log10k_bins = 300
log10k_min = -3.49
log10k_max = 3.15
matter_klim = 0.001
matter_mulim = 0.001
small_k_damping_for1h = damped
lower_calc_limit = 1e-200

; Tabulated input files section
;
; Collection of tabulated files. For the moment we only explain the necessary ones.
; important for accurate modelling. E.g. the pair count files. 
;   input_directory:   Where to look for input files in general
;                      Parameter: string to path
;   npair_directory:   Where to look for the pair counts.
;                      Parameter: string to path
;   npair_mm_file:     File of the cosmic shear pair counts (within the npair_directory)
;                      Parameter: filename as string. If there are N_source bins, there will be N_source(N_source+1)/2
;                                 files. The bin combination should be labelled as ? ? in the filename (see example).
;                                 Note that this should fit the tomographic bins. 
;                                 IMPORTANT: The format should be the one obtained from tree-corr. The code always uses
;                                 the weighted pair counts (last column in the output file)                               
;   npair_gm_file:     File of the GGL (source-lens) pair counts (within the npair_directory)
;                      Parameter: filename as string. 
;   npair_gg_file:     File of the clustering pair counts (within the npair_directory)
;                      Parameter: filename as string. 
;   powspec_directory: Where to look for 3D power spectrum input files
;                      Parameter: string to path
;   Pgg_file:          File for the galaxy galaxy 3D power spectrum. Must contain at least 3 columns:
;                               redshift        k           P(k,z)
;                      Parameter: filename as string. 
;   Pgm_file:          File for the galaxy matter 3D power spectrum. Must contain at least 3 columns:
;                               redshift        k           P(k,z)
;                      Parameter: filename as string. 
;   Pmm_file:          File for the matter matter 3D power spectrum. Must contain at least 3 columns:
;                               redshift        k           P(k,z)
;                      Parameter: filename as string. 
;   Cell_directory:    Where to look for 2D angular power spectrum input files.  
;                      Parameter: string to path
;   Cgg_file:          File for the galaxy galaxy angular power spectrum (galaxy clustering). The file must be organised such that for example:
;                      Note that we recommend to provide a finely sampled file, something like 100 ell bins between 2 (or the minimum ell considered) and 1e4 (or the maximum ell considered) logarithmically spaced.
;                               ell        tomo_i       tomo_j           Cgg_ij (ell, sample1, sample1)         Cgg_ij (ell, sample1, sample2)  ...    Cgg_ij (ell, sampleM, sampleM)
;                                2            1            1                   ...
;                                2            1            2                   ...
;                                               ...
;                                2            1            n                   ...
;                                2            2            1                   ...
;                                               ...
;                                3            1            1                   ...
;                                               ...
;                      tomo_i and tomo_j can run from 0 to n-1 or 1 to n. M mass sample bins, these should agree with the number of bins chosen for the bias section
;                      Parameter: filename as string. 
;                           MUST contain 'gg'
;   Cgm_file:          File for the galaxy matter angular power spectrum (GGL). The file should be organised as follows
;                      Note that we recommend to provide a finely sampled file, something like 100 ell bins between 2 (or the minimum ell considered) and 1e4 (or the maximum ell considered) logarithmically spaced.
;                               ell        tomo_i       tomo_j           Cgm_ij (ell, sample1)   ...         Cgm_ij (ell, sampleM) 
;                                2            1            1                   ...
;                                2            1            2                   ...
;                                               ...
;                                2            1            n                   ...
;                                2            2            1                   ...
;                                               ...
;                                3            1            1                   ...
;                      tomo_i and tomo_j can run from 0 to n-1 or 1 to n. M mass sample bins, these should agree with the number of bins chosen for the bias section
;                      Parameter: filename as string.
;                           MUST contain 'gm' or 'gkappa'
;   Cmm_file:          File for the matter matter angular power spectrum (cosmic shear). The file should be organised as follows
;                      Note that we recommend to provide a finely sampled file, something like 100 ell bins between 2 (or the minimum ell considered) and 1e4 (or the maximum ell considered) logarithmically spaced.
;                               ell        tomo_i       tomo_j           Cmm_ij (ell)  
;                                2            1            1                   ...
;                                2            1            2                   ...
;                                               ...
;                                2            1            n                   ...
;                                2            2            1                   ...
;                                               ...
;                                3            1            1                   ...
;                      tomo_i and tomo_j can run from 0 to n-1 or 1 to n.
;                      Parameter: filename as string. 
;                          MUST contain 'mm' or 'kappakappa'
;
;   Here come additional variables if the arbitrary observable flag is set to be true
;   arb_summary_directory:       Directory where to find all the filters
;                                Parameter: string to path
;   arb_fourier_filter_gg_file:  File(s) for the Fourier space filters for the gg summary statistics
;                                Parameter: filename as string. 
;                                Each file should be structured as
;                                   ell     filter_gg
;                                    1          ...
;                                   ...         ...
;                                   ell_max     ...                                    
;   arb_real_filter_gg_file:     File(s) for the real space filters for the gg summary statistics
;                                Parameter: filename as string. 
;                                Each file should be structured as
;                                   theta[arcmin]     filter_gg
;                                       0.5              ...
;                                       ...              ...
;                                    theta_max           ...          
;   arb_fourier_filter_gm_file:  File(s) for the Fourier space filters for the gm summary statistics
;                                Parameter: filename as string. 
;                                Each file should be structured as
;                                   ell     filter_gm
;                                    1          ...
;                                   ...         ...
;                                   ell_max     ...                                    
;   arb_real_filter_gm_file:     File(s) for the real space filters for the gm summary statistics
;                                Parameter: filename as string. 
;                                Each file should be structured as
;                                   theta[arcmin]     filter_gm
;                                       0.5              ...
;                                       ...              ...
;                                    theta_max           ...        
;   arb_fourier_filter_mmE_file: File(s) for the Fourier space filters for the mmE summary statistics. 
;                                These are the filters dictate how the theoretical E-mode Cell is mapped to the
;                                'E' mode summary (can also be xi_p)
;                                Parameter: filename as string.
;                                Each file should be structured as
;                                   ell     filter_mmE
;                                    1          ...
;                                   ...         ...
;                                   ell_max     ...                                    
;   arb_fourier_filter_mmB_file: File(s) for the Fourier space filters for the mmB summary statistics
;                                Parameter: filename as string.
;                                These are the filters dictate how the theoretical E-mode Cell is mapped to the
;                                'B' mode summary (can also be xi_m).
;                                If you pass the same files as arb_fourier_filter_mmE_file, it is treated as zero (e.g. for COSEBIs)
;                                Each file should be structured as
;                                   ell     filter_mmB
;                                    1          ...
;                                   ...         ...
;                                   ell_max     ...                                    
;   arb_real_filter_mm_p_file:   File(s) for the real space filters for the mm summary statistics relating to xi_p
;                                Parameter: filename as string.
;                                These are the filters dictate how the theoretical xi_plus is mapped to the
;                                'E' mode summary (can also be xi_p)
;                                Each file should be structured as
;                                   theta[arcmin]     filter_mm_p
;                                       0.5              ...
;                                       ...              ...
;                                    theta_max           ...        
;   arb_real_filter_mm_m_file:   File(s) for the real space filters for the mm summary statistics relating to xi_m
;                                These are the filters dictate how the theoretical xi_minus is mapped to the
;                                'B' mode summary (can also be xi_m)
;                                Parameter: filename as string.
;                                Each file should be structured as
;                                   theta[arcmin]     filter_mm_m
;                                       0.5              ...
;                                       ...              ...
;                                    theta_max           ...        

[tabulated inputs files]
; input_directory = ./input/
npair_directory = ./input/npair/
npair_mm_file = XI_K1000_theta_0.5_300.0_nBins_5_Bin?_Bin?.ascii
arb_summary_directory = ./input/arbitrary_summary/
;arb_fourier_filter_gg_file = fourier_weight_realspace_cf_gg_?.table
;arb_real_filter_gg_file = real_weight_realspace_cf_gg_?.table
arb_fourier_filter_mmE_file = bandpowers/fourier_weight_bandpowers_mmE_?.table, cosebis/Wn_0.5_to_300.0_?.table
;, fourier_weight_realspace_cf_mm_p_?.table
arb_fourier_filter_mmB_file = bandpowers/fourier_weight_bandpowers_mmB_?.table, cosebis/Wn_0.5_to_300.0_?.table
;, fourier_weight_realspace_cf_mm_m_?.table
arb_real_filter_mm_p_file =  bandpowers/real_weight_bandpowers_mmE_?.table, cosebis/Tp_0.5_to_300.0_?.table
;, real_weight_realspace_cf_mm_p_?.table
arb_real_filter_mm_m_file =  bandpowers/real_weight_bandpowers_mmB_?.table, cosebis/Tm_0.5_to_300.0_?.table
;, real_weight_realspace_cf_mm_m_?.table
;arb_real_filter_mm_m_file = real_weight_bandpowers_mmB_?.table, Tminus?_0.50-300.00.table

powspec_directory = ./input/power_spectrum
;Pgg_file = Pgg.ascii
;Pgm_file = Pgm.ascii
;Pmm_file = Pk.test.txt
;effbias_file = effbias.ascii
;effbias_directory = ./input/bias
;mor_directory = ./input/bias
;mor_cen_file = mor_cen.ascii
;mor_sat_file = mor_sat.ascii
;occprob_directory = ./input/bias
;occprob_cen_file = occprob_0_cen.ascii, occprob_1_cen.ascii, occprob_2_cen.ascii
;occprob_sat_file = occprob_0_sat.ascii, occprob_1_sat.ascii, occprob_2_sat.ascii
;occnum_directory = ./input/bias
;occnum_cen_file = occnum_cen.ascii
;occnum_sat_file = occnum_sat.ascii

Cell_directory = ./output
;Cgg_file = Cell_gg.ascii
;Cgm_file = Cell_gkappa.ascii
;Cmm_file = Cell_kappakappa.ascii

;Cmm_file = clbin_?_?.txt
;trispec_directory = ./input/trispectra/
;trispec_file = trispectra.ascii

; Defines the number of cores/threads used
[misc]
num_cores = 8